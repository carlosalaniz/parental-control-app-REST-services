**Rest services**

REST services that support parental control application

##Models
##### Parent Model (RDB)
| Field        | Type        |                   |
| ------------ | ----------- | ----------------- |
| id           | Integer     | PK, autogenerated |
| email        | String(50)  |
| password     | String(255) |
| full_name    | String(255) |
| phone_number | String(50)  |
| address      | String(255) |

##### Child Model (RDB)
| Field                          | Type       |                                      |
| ------------------------------ | ---------- | ------------------------------------ |
| id                             | Integer    | PK, autogenerated                    |
| [parent_id](#parent-model-rdb) | Integer    | FK to [Parent](#parent-model-rdb).id |
| name                           | String(50) |                                      |
| birth_date                     | Date(50)   |                                      |
| gender                         | Tinyint    |                                      |
| phone_number                   | String(50) |                                      |

##### Device Model (RDB)
| Field                                      | Type       |                                    |
| ------------------------------------------ | ---------- | ---------------------------------- |
| id                                         | Integer    | PK, autogenerated                  |
| [child_id](#child-model-rdb)               | Integer    | FK to [Child](#child-model-rdb).id |
| [type](#device-types-constants)            | Tinyint    |                                    |
| last_known_position_id                     | Integer    |                                    |
| device_locked                              | Boolean    |                                    |
| [device_policy_id](#android-reports-nosql) | String(50) | Ref. to NoSQL record               |

##### Device-Android Model extends [Device Model](#device-model-rdb) (RDB)
| Field                   | Type        |                                          |
| ----------------------- | ----------- | ---------------------------------------- |
| [id](#device-model-rdb) | Integer     | PK, FK to [Device](#device-model-rdb).id |
| fcm_registration_token  | String(512) |

##### Command Model (RDB)
| Field                                     | Type    |                                      |
| ----------------------------------------- | ------- | ------------------------------------ |
| id                                        | Integer | PK, autogenerated                    |
| [device_id](#device-model-rdb)            | Integer | FK to [Device](#device-model-rdb).id |
| [command](#command-types-constants)       | Tinyint |
| [status](#command-status-types-constants) | Tinyint |
| payload                                   | String  |
| updated_at                                | Date    |

##### Device Positions (RDB)
| Field                          | Type    |                                      |
| ------------------------------ | ------- | ------------------------------------ |
| id                             | Integer | PK, autogenerated                    |
| [device_id](#device-model-rdb) | Integer | FK to [Device](#device-model-rdb).id |
| request_date                   | Date    |                                      |
| postion                        | Point   |                                      |

##### Device Types (Constants)
| Type_id | Type    |
| ------- | ------- |
| 0       | Android |
| 1       | Windows |
| 2       | iOS     |
| 3       | MacOs   |

##### Roles (Constants)
| Type_id | Type   |
| ------- | ------ |
| 2       | QARole |

##### Command Types (Constants)
| Command_id | Type                             |
| ---------- | -------------------------------- |
| 0          | REQUEST_LOCATION                 |
| 1          | DISPLAY_MESSAGE                  |
| 2          | UPDATE_APP_USAGE_LIMITS          |
| 4          | UPDATE_GLOBAL_DEVICE_USAGE_LIMIT |

##### Command Status Types (Constants)
| Command_status_id | Type             |
| ----------------- | ---------------- |
| 0                 | COMMAND_RECEIVED |
| 1                 | COMMAND_FAILED   |
| 2                 | COMMAND_SUCCESS  |

---
##### Android Device Policies (NoSQL)
| Field                          | Type                 |                   |
| ------------------------------ | -------------------- | ----------------- |
| id                             | String(50)           | PK, autogenerated |
| application_daily_usage_limits | Map<String, Integer> |                   |
| phone_daily_usage_limit        | Integer              |                   |

##### Android Reports (NoSQL)

| Field                          | Type                      |                   |
| ------------------------------ | ------------------------- | ----------------- |
| id                             | String(50)                | PK, autogenerated |
| device_id                      | String(50)                |                   |
| report_date                    | Date                      |                   |
| application_daily_usage_report | Map<String, Integer>      |                   |
| phone_daily_usage_report       | Integer                   |                   |
| location_report                | Array<Tuple<Point, Date>> |                   |

##Endpoints

Authentication  - prefix ```/```

| Methods | Endpoint      | Body Type       | Return Type                                                  |                                           |
| ------- | ------------- | --------------- | ------------------------------------------------------------ | ----------------------------------------- |
| POST    | /signup       | CreateParentDto | {data:{token:string, parent:Parent}, message:"login"}        |                                           |
| POST    | /authenticate | LoginParentDto  | {data:{token:string, parent:Parent}, message:"authenticate"} | JWT with Parent {id:number, type:'Parent' | 'Device} |
